### Опис Основної Логіки:
У нас 5 основних структур: 
- Handler (обробляє запити) /internal/handlers/handler.go
- EmailService (основна бізнес логіка) /internal/service/email.go
- Fstorage (зберігає записи у файл) /internal/storage/fstorage.go
- CoinbaseClient (дістає поточний курс з сервісу Coinbase) /internal/client/coinbase.go
- SmtpClient (відправляє імейли використовуючи якийсь smtp сервер) /internal/client/smtp.go


1) Handler спілкується з EmailService та має 3 основних методи, основна логіка яких:
   - GetRate() 
     1) Визиває метод сервісу Rate(), який повертає поточний курс, якщо з сервісом щось сталося і курс ми отримати не можемо, повертаємо помлику 400
     2) Потім пише цей курс в респонс. 
   - Subscribe()
     1) Визиває метод сервісу Subscribe(), який просить записати у файл імейл, якщо такий запис вже існує повертаємо 409, також валідує імейл на правопис
     2) Отримує імейл, передає його в метод сервісу 
   - SendEmails()
     1) Визиває метод сервісу SendEmails(), який просить smtp клієнт розіслати ці імейли
     2) Пишемо в респонс ті імейли, для яких отримали помилку
2) EmailService спілкується з Fstorage, CoinbaseClient, SmtpClient через інтерфейси, також має 3 основні методи:
   - Rate()
     1) Звертається до клієнту для отримання поточного курсу
   - SendEmail()
     1) Теж отримує поточний курс за допомогою клієнту
     2) Визиває метод GetEmails() у Storage, який повертає масив імейлів
     3) Далі у окремому потоці викликаємо метод smtp-клієнта SendEmail(), який відправяє імейл
     4) У разі помилки при відправлені додаємо імейл в массив
     5) Чекаємо завершення роботи усіх потоків, щоб повернути масив усіх невідправлених імейлів
   - Subscribe()
     1) Просить Storage додати новий імейл до списку, повертає помилку, якщо імейл вже існує
3) Fstorage тримає в собі файл та відображення цього файлу у хєш-таблиці
    - Append() додає запис у файл
      1) Перевіряє чи є запис у нашій хєш-таблиці, якщо є, то повертаємо помилку
      2) Якщо записа нема, то блокуємо мьютекс, щоб інші потоки нічого не зламали, записуємо у файл та у індекс, відкриваємо мьютекс
    - GetEmails() повертає список імейлів
      1) Формує масив імейлів, які є у списку (бере з індексу)
    - buildIndex() використовуємо при ініціалізації, заповніє нам хєш-таблицю
    - Open() конструктор для нашого Fstorage, який визиває buildIndex()
4) CoinbaseClient має один метод, який робить Get запит в https://api.coinbase.com/v2/prices/spot?currency=UAH, парсить джейсон, та повертає поточний курс.
5) SmtpClient теж має один метод, який робить запит в SMTP server, щоб відправити імейл.

/cmd/main.go підтягує конфігурацію, створює усі необхідні структури та запускає сервер

### Запуск додатку
1) склонувати репозиторій
2) відредагувати config.yml, змінивши дані для доступа до smtp серверу (наприклад, це може бути gmail і ваш акаунт на ньому)
3) створити докер образ: docker build --tag go-email . 
4) docker run -p 1313:1313 go-email (перший порт повинен відповідати bind_ip з конфігу, а другий на якому ви хочете запустити докер контейнер)

